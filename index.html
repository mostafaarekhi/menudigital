<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>منوی کافه — پیش‌نمایش</title>
  <style>
    :root{
      --bg:#faf8f6;--card:#fff;--accent:#b85c3c;--muted:#666;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{font-family: "Vazirmatn", system-ui, -apple-system, 'Segoe UI', Roboto, "Helvetica Neue", Arial; margin:0;background:linear-gradient(180deg,#fff 0%,var(--bg) 100%);color:#111}
    header{display:flex;align-items:center;gap:12px;padding:18px 20px;border-bottom:1px solid #eee;background:var(--card);position:sticky;top:0;z-index:10}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#faf;#eee);display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;background:var(--accent)}
    .brand{display:flex;flex-direction:column}
    .brand .title{font-size:18px;font-weight:800}
    .brand .subtitle{font-size:12px;color:var(--muted)}

    .container{display:grid;grid-template-columns:260px 1fr;gap:20px;padding:18px;max-width:1200px;margin:18px auto}
    @media (max-width:900px){.container{grid-template-columns:1fr;}.sidebar{order:2}.main{order:1}}

    .sidebar{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.03)}
    .category{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;cursor:pointer;margin-bottom:8px}
    .category:hover{background:#fbf7f6}
    .category.active{background:linear-gradient(90deg,rgba(184,92,60,0.12),rgba(184,92,60,0.06));border-left:3px solid var(--accent)}
    .cat-icon{width:44px;height:44px;border-radius:8px;background:var(--glass);display:flex;align-items:center;justify-content:center;font-weight:700}

    .main{display:flex;flex-direction:column;gap:12px}
    .filters{display:flex;justify-content:space-between;align-items:center}
    .search{flex:1;margin-left:12px}
    input[type=search]{width:100%;padding:10px;border-radius:10px;border:1px solid #eee}

    .items{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media (max-width:900px){.items{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.items{grid-template-columns:1fr}}

    .card{background:var(--card);border-radius:12px;padding:12px;display:flex;gap:12px;align-items:center;box-shadow:0 6px 18px rgba(0,0,0,0.03)}
    .photo{width:96px;height:72px;border-radius:8px;background:#eee;flex-shrink:0;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:12px}
    .meta{flex:1}
    .name{font-weight:800}
    .desc{font-size:13px;color:var(--muted);margin-top:6px}
    .price-row{display:flex;gap:10px;align-items:center;margin-top:8px}
    .price{font-weight:800}
    .controls{margin-right:auto;display:flex;align-items:center;gap:8px}
    button.add{background:var(--accent);color:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer}
    .qty{display:inline-flex;align-items:center;border-radius:8px;overflow:hidden;border:1px solid #eee}
    .qty button{padding:6px 8px;background:#fff;border:0;cursor:pointer}
    .qty span{padding:6px 10px;min-width:28px;text-align:center}

    /* cart summary */
    .cart{position:sticky;bottom:18px;background:linear-gradient(180deg,#fff, #fff);border-radius:12px;padding:12px;box-shadow:0 12px 30px rgba(0,0,0,0.06);display:flex;justify-content:space-between;align-items:center;gap:12px}
    .cart .list{max-height:140px;overflow:auto}
    .cart .total{font-weight:900;font-size:18px}

    footer.note{max-width:1200px;margin:8px auto;text-align:center;color:var(--muted);font-size:13px}

  </style>
</head>
<body>
  <header>
    <div class="logo">ک</div>
    <div class="brand">
      <div class="title">کافهٔ سنتی "کافه‌ک"</div>
      <div class="subtitle">منوی آنلاین — پیش‌نمایش</div>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar">
      <div style="font-weight:900;margin-bottom:10px">دسته‌بندی‌ها</div>
      <div id="categories"></div>
    </aside>

    <main class="main">
      <div class="filters">
        <div style="display:flex;gap:12px;align-items:center">
          <label style="font-weight:700">نمایش:</label>
          <select id="viewCat">
            <option value="all">همه</option>
          </select>
        </div>
        <div class="search">
          <input id="search" type="search" placeholder="جستجوی آیتم یا مواد..." />
        </div>
      </div>

      <section class="items" id="items"></section>

      <div class="cart" id="cart">
        <div style="display:flex;gap:12px;align-items:flex-start">
          <div style="font-weight:800">سبد خرید</div>
          <div class="list" id="cartList" style="min-width:220px"></div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end">
          <div class="total" id="total">مجموع: 0 تومان</div>
          <button id="clearCart" style="margin-top:8px;padding:8px 10px;border-radius:8px;border:1px solid #eee;background:#fff;cursor:pointer">پاک کردن</button>
        </div>
      </div>

    </main>
  </div>

  <footer class="note">برای ویرایش آیتم‌ها، بخش <strong>itemsData</strong> در انتهای فایل را تغییر دهید.</footer>

  <script>
    // داده‌های اولیه: 10 دسته با چند آیتم نمونه. برای اضافه/حذف آیتم‌ها این بخش را ویرایش کنید.
    const itemsData = [
      {catId:1, catName:'قهوه‌ها', icon:'☕', items:[
        {id:'c1',name:'اسپرسو',desc:'عصارهٔ قهوهٔ فشرده',price:40000},
        {id:'c2',name:'کاپوچینو',desc:'شیر کف‌کرده و اسپرسو',price:70000},
      ]},
      {catId:2, catName:'چای‌ها', icon:'🍵', items:[{id:'t1',name:'چای سیاه',desc:'با دمنوش محلی',price:25000}]},
      {catId:3, catName:'نوشیدنی‌های خنک', icon:'🥤', items:[{id:'f1',name:'لیموناد',desc:'ترش و شیرین',price:30000}]},
      {catId:4, catName:'کیک‌ها', icon:'🍰', items:[{id:'k1',name:'کیک شکلاتی',desc:'یادگاری روزهای خوب',price:85000}]},
      {catId:5, catName:'صبحانه', icon:'🥐', items:[{id:'b1',name:'پنیر و گردو',desc:'صبحانهٔ سبک',price:60000}]},
      {catId:6, catName:'ساندویچ‌ها', icon:'🥪', items:[{id:'s1',name:'ساندویچ مرغ',desc:'مرغ گریل شده',price:90000}]},
      {catId:7, catName:'سالادها', icon:'🥗', items:[{id:'sa1',name:'سالاد فصل',desc:'سبزیجات تازه',price:50000}]},
      {catId:8, catName:'دسرها', icon:'🍮', items:[{id:'d1',name:'پاناکوتا',desc:'خامهٔ لطیف',price:65000}]},
      {catId:9, catName:'پیش‌غذاها', icon:'🧆', items:[{id:'p1',name:'سیب‌زمینی تنوری',desc:'با سس مخصوص',price:45000}]},
      {catId:10, catName:'مخصوص روز', icon:'⭐', items:[{id:'m1',name:'صبحانهٔ ویژهٔ کافه',desc:'ترکیب انتخابی سرآشپز',price:120000}]}
    ];

    const categoriesEl = document.getElementById('categories');
    const itemsEl = document.getElementById('items');
    const viewCat = document.getElementById('viewCat');
    const search = document.getElementById('search');
    const cartList = document.getElementById('cartList');
    const totalEl = document.getElementById('total');
    const clearCartBtn = document.getElementById('clearCart');

    // state
    let activeCat = 'all';
    let cart = {}; // {id:{item,qty}}

    function renderCategories(){
      categoriesEl.innerHTML='';
      viewCat.innerHTML='<option value="all">همه</option>';
      itemsData.forEach(cat=>{
        const div=document.createElement('div');
        div.className='category';
        div.dataset.cat=cat.catId;
        div.innerHTML=`<div class="cat-icon">${cat.icon}</div><div style="font-weight:800">${cat.catName}</div>`;
        div.addEventListener('click',()=>{setActive(cat.catId)});
        categoriesEl.appendChild(div);

        const opt = document.createElement('option'); opt.value = cat.catId; opt.textContent = cat.catName; viewCat.appendChild(opt);
      });
    }

    function setActive(id){
      activeCat = id;
      document.querySelectorAll('.category').forEach(el=>el.classList.toggle('active', el.dataset.cat==id));
      renderItems();
    }

    function renderItems(){
      const q = search.value.trim().toLowerCase();
      itemsEl.innerHTML='';
      const cats = activeCat==='all' ? itemsData : itemsData.filter(c=>c.catId==activeCat);
      cats.forEach(cat=>{
        cat.items.forEach(it=>{
          if(q){
            const text = (it.name + ' ' + it.desc + ' ' + cat.catName).toLowerCase();
            if(!text.includes(q)) return;
          }

          const card = document.createElement('article'); card.className='card';
          card.innerHTML = `
            <div class="photo">عکس</div>
            <div class="meta">
              <div class="name">${it.name}</div>
              <div class="desc">${it.desc}</div>
              <div class="price-row">
                <div class="controls">
                  <div class="qty" data-id="${it.id}">
                    <button class="dec">−</button>
                    <span class="count">0</span>
                    <button class="inc">+</button>
                  </div>
                </div>
                <div class="price">${it.price.toLocaleString()} تومان</div>
                <div style="width:8px"></div>
                <button class="add" data-id="${it.id}">افزودن</button>
              </div>
            </div>`;

          // events
          card.querySelector('.add').addEventListener('click', ()=> addToCart(it));
          const inc = card.querySelector('.inc'); const dec = card.querySelector('.dec');
          inc.addEventListener('click', ()=> changeQty(it.id, 1));
          dec.addEventListener('click', ()=> changeQty(it.id, -1));

          itemsEl.appendChild(card);
        })
      })

      // update counts in UI
      updateUICounts();
    }

    function addToCart(item){
      if(!cart[item.id]) cart[item.id] = {item, qty:0};
      cart[item.id].qty += 1;
      updateCart();
      updateUICounts();
    }
    function changeQty(id, delta){
      if(!cart[id]){
        // find item object and add
        const found = itemsData.flatMap(c=>c.items).find(x=>x.id===id);
        if(!found) return;
        cart[id] = {item:found, qty:0};
      }
      cart[id].qty = Math.max(0, cart[id].qty + delta);
      if(cart[id].qty===0) delete cart[id];
      updateCart(); updateUICounts();
    }

    function updateCart(){
      cartList.innerHTML='';
      let total = 0;
      Object.values(cart).forEach(c=>{
        const row = document.createElement('div');
        row.style.display='flex'; row.style.justifyContent='space-between'; row.style.gap='8px'; row.style.padding='6px 0';
        row.innerHTML = `<div style="min-width:160px">${c.item.name} × ${c.qty}</div><div style="font-weight:700">${(c.item.price*c.qty).toLocaleString()} تومان</div>`;
        cartList.appendChild(row);
        total += c.item.price * c.qty;
      });
      totalEl.textContent = `مجموع: ${total.toLocaleString()} تومان`;
    }

    function updateUICounts(){
      document.querySelectorAll('.qty').forEach(el=>{
        const id = el.dataset.id;
        const count = cart[id] ? cart[id].qty : 0;
        el.querySelector('.count').textContent = count;
      });
    }

    viewCat.addEventListener('change', ()=>{ setActive(viewCat.value); });
    search.addEventListener('input', ()=> renderItems());
    clearCartBtn.addEventListener('click', ()=>{ cart = {}; updateCart(); updateUICounts(); });

    // init
    function init(){ renderCategories(); renderItems(); }
    init();

  </script>
</body>
</html>
